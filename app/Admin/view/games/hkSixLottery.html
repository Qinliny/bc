{extend name="common/public" /}

{block name="title"}
{$title} - 配置
{/block}

{block name="content"}

<span class="layui-breadcrumb">
    <a><cite>首页</cite></a>
    <a><cite>彩种配置</cite></a>
    <a href="/admin/games/gamesList">彩种列表</a>
    <a><cite>{$title} - 配置</cite></a>
</span>

<div class="content-body">
    <div class="layui-card">
        <div class="layui-card-header">
            {$title} - 配置
        </div>
        <div class="layui-card-body">
            <div class="layui-collapse">
                <div class="layui-colla-item">
                    <h2 class="layui-colla-title">
                        特码配置
                    </h2>
                    <div class="layui-colla-content layui-show layui-form">
                        <table class="layui-table" lay-size="sm">
                            <colgroup>
                                <col width="150">
                                <col width="250">
                                <col width="200">
                                <col>
                            </colgroup>
                            <thead>
                            <tr>
                                <th>特码</th>
                                <th>波色</th>
                                <th>生肖</th>
                                <th>赔率</th>
                                <th>退水</th>
                                <th>单注最低</th>
                                <th>单注最高</th>
                            </tr>
                            </thead>
                            <tbody>
                            {foreach $config['numberConfig'] as $key => $value}
                            <tr>
                                <input type="hidden" name="number-{$value.number}" value="{$value.number}">
                                <td>{$value.number}</td>
                                <td>
                                    <input type="radio" name="color-{$value.number}" lay-verify="required" value="blue"  title="蓝" {if condition="$value.color == 'blue'"}checked{/if}>
                                    <input type="radio" name="color-{$value.number}" lay-verify="required" value="red" title="红" {if condition="$value.color == 'red'"}checked{/if}>
                                    <input type="radio" name="color-{$value.number}" lay-verify="required" value="green" title="绿" {if condition="$value.color == 'green'"}checked{/if}>
                                </td>
                                <td>
                                    <select name="chineseZodiac-{$value.number}" lay-verify="required">
                                        <option value="" {if condition="empty($value.chineseZodiac) == true"}selected{/if}>请选择生肖</option>
                                        {foreach $config.chineseZodiacConfig as $k => $item}
                                        <option value="{$item.type}" {if condition="$value.chineseZodiac == $item.type"}selected{/if}>{$item.type}</option>
                                        {/foreach}
                                    </select>
                                </td>
                                <td>
                                    <input type="text" name="odds-{$value.number}" lay-verify="required" value="{$value.odds}" placeholder="请输入赔率" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="return-{$value.number}" lay-verify="required" value="{$value.return}" placeholder="请输入退水" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="singleNoteMin-{$value.number}" lay-verify="required" value="{$value.singleNoteMin}" placeholder="请输入单注最低" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="singleNoteMax-{$value.number}" lay-verify="required" value="{$value.singleNoteMax}" placeholder="请输入单注最高" autocomplete="off" class="layui-input">
                                </td>
                            </tr>
                            {/foreach}
                            </tbody>
                        </table>
                        <div class="layui-form-item" style="margin-top: 15px">
                            <button class="layui-btn" lay-submit lay-filter="numberConfigSubmit">立即提交</button>
                        </div>
                    </div>
                </div>
                <div class="layui-colla-item">
                    <h2 class="layui-colla-title">色波配置</h2>
                    <div class="layui-colla-content layui-form">
                        <table class="layui-table" lay-size="sm">
                            <colgroup>
                                <col width="150">
                                <col width="250">
                                <col width="200">
                                <col>
                            </colgroup>
                            <thead>
                            <tr>
                                <th>类型</th>
                                <th>赔率</th>
                                <th>退水</th>
                                <th>单注最低</th>
                                <th>单注最高</th>
                            </tr>
                            </thead>
                            <tbody>
                            {foreach $config['colorTypeConfig'] as $key => $value}
                            <input type="hidden" name="type-{$value.type}" value="{$value.type}">
                            <tr>
                                <td>{$value.type}</td>
                                <td>
                                    <input type="text" name="odds-{$value.type}" value="{$value.odds}" placeholder="请输入赔率" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="return-{$value.type}" value="{$value.return}" placeholder="请输入退水" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="singleNoteMin-{$value.type}" value="{$value.singleNoteMin}" placeholder="请输入单注最低" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="singleNoteMax-{$value.type}" value="{$value.singleNoteMax}" placeholder="请输入单注最高" autocomplete="off" class="layui-input">
                                </td>
                            </tr>
                            {/foreach}
                            </tbody>
                        </table>
                        <div class="layui-form-item" style="margin-top: 15px">
                            <button class="layui-btn" lay-submit lay-filter="colorTypeConfigSubmit">立即提交</button>
                        </div>
                    </div>
                </div>
                <div class="layui-colla-item">
                    <h2 class="layui-colla-title">特肖配置</h2>
                    <div class="layui-colla-content layui-form">
                        <table class="layui-table" lay-size="sm">
                            <colgroup>
                                <col width="150">
                                <col width="250">
                                <col width="200">
                                <col>
                            </colgroup>
                            <thead>
                            <tr>
                                <th>类型</th>
                                <th>赔率</th>
                                <th>退水</th>
                                <th>单注最低</th>
                                <th>单注最高</th>
                            </tr>
                            </thead>
                            <tbody>
                            {foreach $config['chineseZodiacConfig'] as $key => $value}
                            <input type="hidden" name="type-{$value.type}" value="{$value.type}">
                            <tr>
                                <td>{$value.type}</td>
                                <td>
                                    <input type="text" name="odds-{$value.type}" value="{$value.odds}" placeholder="请输入赔率" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="return-{$value.type}" value="{$value.return}" placeholder="请输入退水" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="singleNoteMin-{$value.type}" value="{$value.singleNoteMin}" placeholder="请输入单注最低" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="singleNoteMax-{$value.type}" value="{$value.singleNoteMax}" placeholder="请输入单注最高" autocomplete="off" class="layui-input">
                                </td>
                            </tr>
                            {/foreach}
                            </tbody>
                        </table>
                        <div class="layui-form-item" style="margin-top: 15px">
                            <button class="layui-btn" lay-submit lay-filter="chineseZodiacConfigSubmit">立即提交</button>
                        </div>
                    </div>
                </div>
                <div class="layui-colla-item">
                    <h2 class="layui-colla-title">连码配置</h2>
                    <div class="layui-colla-content layui-form">
                        <table class="layui-table" lay-size="sm">
                            <colgroup>
                                <col width="150">
                                <col width="250">
                                <col width="200">
                                <col>
                            </colgroup>
                            <thead>
                            <tr>
                                <th>类型</th>
                                <th>赔率</th>
                                <th>退水</th>
                                <th>单注最低</th>
                                <th>单注最高</th>
                            </tr>
                            </thead>
                            <tbody>
                            {foreach $config['joinNumberConfig'] as $key => $value}
                            <input type="hidden" name="type-{$value.type}" value="{$value.type}">
                            <tr>
                                <td>{$value.type}</td>
                                <td>
                                    <input type="text" name="odds-{$value.type}" value="{$value.odds}" placeholder="请输入赔率" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="return-{$value.type}" value="{$value.return}" placeholder="请输入退水" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="singleNoteMin-{$value.type}" value="{$value.singleNoteMin}" placeholder="请输入单注最低" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="singleNoteMax-{$value.type}" value="{$value.singleNoteMax}" placeholder="请输入单注最高" autocomplete="off" class="layui-input">
                                </td>
                                <input type="hidden" name="inputNumber-{$value.type}" value="{$value.inputNumber}">
                            </tr>
                            {/foreach}
                            </tbody>
                        </table>
                        <div class="layui-form-item" style="margin-top: 15px">
                            <button class="layui-btn" lay-submit lay-filter="joinNumberConfigSubmit">立即提交</button>
                        </div>
                    </div>
                </div>
                <div class="layui-colla-item">
                    <h2 class="layui-colla-title">两面配置</h2>
                    <div class="layui-colla-content layui-form">
                        <table class="layui-table" lay-size="sm">
                            <colgroup>
                                <col width="150">
                                <col width="250">
                                <col width="200">
                                <col>
                            </colgroup>
                            <thead>
                            <tr>
                                <th>类型</th>
                                <th>赔率</th>
                                <th>退水</th>
                                <th>单注最低</th>
                                <th>单注最高</th>
                            </tr>
                            </thead>
                            <tbody>
                            {foreach $config['twoFaceConfig'] as $key => $value}
                            <input type="hidden" name="type-{$value.type}" value="{$value.type}">
                            <tr>
                                <td>{$value.type}</td>
                                <td>
                                    <input type="text" name="odds-{$value.type}" value="{$value.odds}" placeholder="请输入赔率" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="return-{$value.type}" value="{$value.return}" placeholder="请输入退水" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="singleNoteMin-{$value.type}" value="{$value.singleNoteMin}" placeholder="请输入单注最低" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="singleNoteMax-{$value.type}" value="{$value.singleNoteMax}" placeholder="请输入单注最高" autocomplete="off" class="layui-input">
                                </td>
                            </tr>
                            {/foreach}
                            </tbody>
                        </table>
                        <div class="layui-form-item" style="margin-top: 15px">
                            <button class="layui-btn" lay-submit lay-filter="twoFaceConfigSubmit">立即提交</button>
                        </div>
                    </div>
                </div>
                <div class="layui-colla-item">
                    <h2 class="layui-colla-title">合肖配置</h2>
                    <div class="layui-colla-content layui-form">
                        <table class="layui-table" lay-size="sm">
                            <colgroup>
                                <col width="150">
                                <col width="250">
                                <col width="200">
                                <col>
                            </colgroup>
                            <thead>
                            <tr>
                                <th>类型</th>
                                <th>赔率</th>
                                <th>退水</th>
                                <th>单注最低</th>
                                <th>单注最高</th>
                            </tr>
                            </thead>
                            <tbody>
                            {foreach $config['andShawConfig'] as $key => $value}
                            <input type="hidden" name="type-{$value.type}" value="{$value.type}">
                            <tr>
                                <td>{$value.type}</td>
                                <td>
                                    <input type="text" name="odds-{$value.type}" value="{$value.odds}" placeholder="请输入赔率" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="return-{$value.type}" value="{$value.return}" placeholder="请输入退水" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="singleNoteMin-{$value.type}" value="{$value.singleNoteMin}" placeholder="请输入单注最低" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="singleNoteMax-{$value.type}" value="{$value.singleNoteMax}" placeholder="请输入单注最高" autocomplete="off" class="layui-input">
                                </td>
                            </tr>
                            {/foreach}
                            </tbody>
                        </table>
                        <div class="layui-form-item" style="margin-top: 15px">
                            <button class="layui-btn" lay-submit lay-filter="andShawConfigSubmit">立即提交</button>
                        </div>
                    </div>
                </div>
                <div class="layui-colla-item">
                    <h2 class="layui-colla-title">特头尾配置</h2>
                    <div class="layui-colla-content layui-form">
                        <table class="layui-table" lay-size="sm">
                            <colgroup>
                                <col width="150">
                                <col width="250">
                                <col width="200">
                                <col>
                            </colgroup>
                            <thead>
                            <tr>
                                <th>类型</th>
                                <th>赔率</th>
                                <th>退水</th>
                                <th>单注最低</th>
                                <th>单注最高</th>
                            </tr>
                            </thead>
                            <tbody>
                            {foreach $config['headAndEndConfig'] as $key => $value}
                            <input type="hidden" name="type-{$value.type}" value="{$value.type}">
                            <tr>
                                <td>{$value.type}</td>
                                <td>
                                    <input type="text" name="odds-{$value.type}" value="{$value.odds}" placeholder="请输入赔率" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="return-{$value.type}" value="{$value.return}" placeholder="请输入退水" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="singleNoteMin-{$value.type}" value="{$value.singleNoteMin}" placeholder="请输入单注最低" autocomplete="off" class="layui-input">
                                </td>
                                <td>
                                    <input type="text" name="singleNoteMax-{$value.type}" value="{$value.singleNoteMax}" placeholder="请输入单注最高" autocomplete="off" class="layui-input">
                                </td>
                            </tr>
                            {/foreach}
                            </tbody>
                        </table>
                        <div class="layui-form-item" style="margin-top: 15px">
                            <button class="layui-btn" lay-submit lay-filter="headAndEndConfigSubmit">立即提交</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{/block}

{block name="js"}
<script>
    var gameId = '{$gameId}';
    var gameType = '{$title}'
    layui.use(['layer', 'form', 'laypage', 'element'], function(){
        let $ = layui.$, layer = layui.layer, form = layui.form, laypage = layui.laypage, element = layui.element;
        
        function saveData(type, data) {
            let loading = layer.load(1, {shade: [0.3,'#000']});
            $.post('/admin/games/saveConfig',
                {type: gameType, "typeItem": type, config: data, gameId: gameId},
                function(resp) {
                    layer.closeAll();
                    if (resp.code != 0) {
                        layer.msg(resp.errors, {icon: 5, shift: 6, time: 1500} );
                        return false;
                    } else {
                        layer.msg("保存成功！", {icon: 1, time: 1500});
                    }
                }).error(function() {
                layer.closeAll();
                layer.msg("服务器出现异常！", {icon: 5, shift: 6} );
            })
        }
        
        form.on('submit(numberConfigSubmit)', function(obj) {
            saveData("numberConfig", obj.field)
        })

        form.on('submit(colorTypeConfigSubmit)', function(obj) {
            saveData("colorTypeConfig", obj.field)
        })

        form.on('submit(chineseZodiacConfigSubmit)', function(obj) {
            saveData("chineseZodiacConfig", obj.field)
        })

        form.on('submit(joinNumberConfigSubmit)', function(obj) {
            saveData("joinNumberConfig", obj.field)
        })

        form.on('submit(twoFaceConfigSubmit)', function(obj) {
            saveData("twoFaceConfig", obj.field)
        })

        form.on('submit(andShawConfigSubmit)', function(obj) {
            saveData("andShawConfig", obj.field)
        })

        form.on('submit(headAndEndConfigSubmit)', function(obj) {
            saveData("headAndEndConfig", obj.field)
        })
    })
</script>
{/block}