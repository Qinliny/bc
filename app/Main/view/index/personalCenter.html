<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="__STATIC__/common/css/sixLottery.css">
    <link rel="stylesheet" href="__STATIC__/layui/css/layui.css">
    <link rel="stylesheet" href="__STATIC__/common/css/common.css">
    <title>个人中心</title>
</head>
<body>
<div class="main-box">
    <div class="main-header">
        <div class="header-logo">
            <img src="__STATIC__/common/images/logo.png" alt="" style="height: 100%">
        </div>
        
        {include file="common/header-menu" /}
    </div>
    
    {include file="common/header-game" /}
    
    <div class="game-item">
        <ul>
            <li>
            
            </li>
        </ul>
    </div>
    
    <div class="main-body">
        {include file="common/main-body-side" /}
        
        <div class="main-body-content" style="background-color: #eeeeee">
            <div class="content-main1">
                <blockquote class="layui-elem-quote blockquote">
                    <h1>个人中心</h1>
                </blockquote>
    
                <div class="layui-panel" style="padding: 5px">
                    <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
                        <ul class="layui-tab-title">
                            <li class="layui-this">个人信息设置</li>
                            <li>登入密码</li>
<!--                            <li>提款密码</li>-->
                            <li>消息中心</li>
                        </ul>
                        
                        <div class="layui-tab-content">
                            <div class="layui-tab-item layui-show">
                                <div class="layui-form">
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">姓名：</label>
                                        <div class="layui-input-inline">
                                            <input type="text" name="name" lay-verify="name"
                                                   value="{$accountInfo.name}"
                                                   placeholder="请输入姓名" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
        
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">手机号：</label>
                                        <div class="layui-input-inline">
                                            <input type="text" name="phone"  lay-verify="phone"
                                                   value="{$accountInfo.phone}"
                                                   placeholder="请输入手机号码" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
        
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">QQ：</label>
                                        <div class="layui-input-inline">
                                            <input type="text" name="qq" lay-verify="qq"
                                                   value="{$accountInfo.qq}"
                                                   placeholder="请输入手机号码" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
        
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">邮箱：</label>
                                        <div class="layui-input-inline">
                                            <input type="text" name="email" required  lay-verify="required"
                                                   value="{$accountInfo.email}"
                                                   placeholder="请输入手机号码" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
        
                                    <div class="layui-form-item">
                                        <div class="layui-input-block">
                                            <button class="layui-btn" lay-submit lay-filter="setPersonalCenter">立即提交</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
    
                            <div class="layui-tab-item">
                                <div class="layui-form">
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">当前密码：</label>
                                        <div class="layui-input-inline">
                                            <input type="password" name="old_password" lay-verify="old_password"
                                                   placeholder="请输入当前密码" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">新密码：</label>
                                        <div class="layui-input-inline">
                                            <input type="password" name="new_password" lay-verify="new_password"
                                                   placeholder="请输入新密码" autocomplete="off" class="layui-input">
                                        </div>
                                        <div class="layui-form-mid layui-word-aux">密码只能由字母、数字组成，长度为6到18位</div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">确认密码：</label>
                                        <div class="layui-input-inline">
                                            <input type="password" name="confirm_password" lay-verify="confirm_password"
                                                   placeholder="请再次确认密码" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <div class="layui-input-block">
                                            <button class="layui-btn" lay-submit lay-filter="setPasssword">立即提交</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
    
                            <div class="layui-tab-item">
                                <h2>暂无 消息</h2>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
</div>

</body>
</html>

<script src="__STATIC__/layui/layui.js"></script>
<script src="__STATIC__/admin/js/common.js"></script>
<script>
    layui.use(['layer', 'form'], function(){
        let $ = layui.$, layer = layui.layer, form = layui.form;

        form.verify({
            name: function(value) {
                if (isEmpty(value)) { return '请输入姓名'; }
                if (value.length > 5) { return "姓名长度不能超过5位" }
            },
            qq: function(value) {
                if (isEmpty(value)) { return '请输入qq'; }
                if (!/^[1-9][0-9]{4,12}$/.test(value)) {
                    return "请输入正确的QQ号"
                }
            },
            email: function(value) {
                if (isEmpty(value)) { return '请输入邮箱'; }
                if (!/^[a-z0-9A-Z]+[- | a-z0-9A-Z . _]+@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\\.)+[a-z]{2,}$/.test(value)) {
                    return "请输入正确的邮箱"
                }
            },
            old_password: function(value) {
                if (isEmpty(value)) { return '请输入当前密码'; }
            },
            new_password: function(value) {
                if (isEmpty(value)) { return '请输入新密码'; }
                if (!/^[0-9a-z]*$/.test(value)) { return "密码只能由字母、数字组成，长度为6到18位" }
                if (value.length > 18 || value.length < 6) {
                    return "密码只能由字母、数字组成，长度为6到18位"
                }
            },
            confirm_password: function(value) {
                if (isEmpty(value)) { return '请再次确认新密码'; }
                var password = $('input[name="new_password"]').val();
                if (password != value) {
                    return '两次输入的密码不一致，请重新输入';
                }
            }
        });

        form.on('submit(setPersonalCenter)',  function(obj) {
            layer.load(1, {shade: [0.3,'#000']});

            $.post('/main/setPersonalCenter', obj.field, function(resp){
                layer.closeAll();
                if (resp.code != 0) {
                    layer.msg(resp.errors, {icon: 5, shift: 6} );
                    return false;
                }
                window.location.href = "/main/personalCenter"
            }).error(function(){
                layer.closeAll();
                layer.msg("服务器出现异常！", {icon: 5, shift: 6} );
            })
        })
        
        form.on('submit(setPasssword)',  function(obj) {
            layer.load(1, {shade: [0.3,'#000']});

            $.post('/main/setPasssword', obj.field, function(resp){
                layer.closeAll();
                if (resp.code != 0) {
                    layer.msg(resp.errors, {icon: 5, shift: 6} );
                    return false;
                }
                window.location.href = "/main/personalCenter"
            }).error(function(){
                layer.closeAll();
                layer.msg("服务器出现异常！", {icon: 5, shift: 6} );
            })
        })
    })
</script>